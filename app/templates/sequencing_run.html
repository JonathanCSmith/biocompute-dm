{% extends "base.html" %}
{% block custom_css %}
<link rel=stylesheet type="text/css" href="/static/css/large_table.css?v=1">
{% endblock %}

{% block content %}
<div class="input-table">
    <div class="action exempt">
        <h3>Run details</h3>
        <table class="content">
            <tr>
                <th>Sequence Run Name</th>
                <th>Genomics Lead</th>
                <th>Start Date</th>
                <th>Completion Date</th>
                <th>Data Location</th>
                <th>Flow Cell ID</th>
                <th>Index Tag 1 Cycles</th>
                <th>Index Tag 2 Cycles</th>
                <th>Read 1 Cycles</th>
                <th>Read 2 Cycles</th>
                <th>Paired End (Yes / No)</th>
            </tr>

            <tr>
                <td>{{ run.name }}</td>
                <td>{{ run.genomics_lead }}</td>
                <td>{{ run.start_date }}</td>
                <td>{{ run.completion_date }}</td>
                <td>{{ run.data_location }}</td>
                <td>{{ run.flow_cell_id }}</td>
                <td>{{ run.index_tag_cycles }}</td>
                <td>{{ run.index_tag_cycles_2 }}</td>
                <td>{{ run.read_cycles }}</td>
                <td>{{ run.read_cycles_2 }}</td>
                <td>{{ run.paired_end }}</td>
            </tr>
        </table>
        <br>
    </div>
    <br>

    <div class="action exempt">
        <h3>Project Details</h3>
        <table class="content2">
            <tr>
                <th>Project Name</th>
                <th>Selected Pipeline</th>
                <th>Current Stage</th>
                <th>Current Status</th>
                <th>Add Client</th>
            </tr>

            {% for project in run.project %}
            <tr>
                <td><a href="{{ url_for('project', pid=project.id, type=project.type) }}">{{ project.name }}</a></td>

                {% if project.pipeline %}
                <td><a href="{{ url_for('pipeline', pipeline=project.pipeline) }}">{{ project.pipeline.name }}</a></td>
                {% else %}
                <td>We will select pipelines here</td>
                {% endif %}

                {% if project.pipeline_status %}
                {% if project.pipeline_status.current_stage %}
                <td>{{ project.pipeline_status.current_stage.name }}</td>

                {% if project.pipeline_status.current_stage.status == "input_required" %}
                <td><img src="#"></td>
                {% elif project.pipeline_status.current_stage.status == "running" %}
                <td><img src="#"></td>
                {% elif project.pipeline_status.current_stage.status == "finished" %}
                <td><img src="#"></td>
                {% elif project.pipeline_status.current_stage.status == "stopped" %}
                <td><img src="#"></td>
                {% endif %}

                {% else %}
                <td><a href="{{ url_for('pipeline_start', project=project) }}">Start</a></td>
                <td>No stage queued</td>
                {% endif %}
                {% else %}
                <td>Drop down list of pipelines here.</td>
                <td>No pipeline selected</td>
                {% endif %}

                <td><a href="{{ url_for('link_project_to_client', pid=project.id) }}">Link To Client</a></td>

            </tr>
            {% endfor %}
        </table>

        <br>
        <a href="{{ url_for('input_sequencing_project', rid=run.id, type='none') }}" class="input">Add Project Mappings File</a>
        <br>
        <br>
    </div>
</div>
{% endblock %}