{% extends "base.html" %}
{% block custom_css %}
<link rel=stylesheet type="text/css" href="/static/css/large_table.css?v=1">
{% endblock %}

{% block content %}
<div class="input-table">
    <div class="action exempt">
        <h3>Submission details</h3>
        <table class="content">
            <tr>
                <th>Sequence Submission Name</th>
                <th>Genomics Lead</th>
                <th>Start Date</th>
                <th>Completion Date</th>
                <th>Data Location</th>
                <th>Flow Cell ID</th>
                <th>Index Tag 1 Cycles</th>
                <th>Index Tag 2 Cycles</th>
                <th>Read 1 Cycles</th>
                <th>Read 2 Cycles</th>
                <th>Paired End (Yes / No)</th>
            </tr>

            <tr>
                <td>{{ submission.name }}</td>
                <td>{{ submission.leader }}</td>
                <td>{{ submission.start_date }}</td>
                <td>{{ submission.completion_date }}</td>
                <td>{{ submission.data_location }}</td>
                <td>{{ submission.flow_cell_id }}</td>
                <td>{{ submission.index_tag_cycles }}</td>
                <td>{{ submission.index_tag_cycles_2 }}</td>
                <td>{{ submission.read_cycles }}</td>
                <td>{{ submission.read_cycles_2 }}</td>
                <td>{{ submission.paired_end }}</td>
            </tr>
        </table>
        <br>
    </div>
    <br>

    <div class="action exempt">
        <h3>Sample Grouping Details</h3>
        <table class="content2">
            <tr>
                <th>Sample Grouping Name</th>
                <th>Selected Pipeline</th>
                <th>Current Stage</th>
                <th>Current Status</th>
                <th>Add Client</th>
            </tr>

            {% for grouping in submission.sample_group %}
            <tr>
                <td><a href="{{ url_for('sample_group', gid=grouping.id, type=grouping.type) }}">{{ grouping.name }}</a></td>

                {% if grouping.pipeline %}
                <td><a href="{{ url_for('pipeline', pipeline=grouping.pipeline) }}">{{ grouping.pipeline.name }}</a></td>
                {% else %}
                <td>We will select pipelines here</td>
                {% endif %}

                {% if grouping.pipeline_status %}
                {% if grouping.pipeline_status.current_stage %}
                <td>{{ grouping.pipeline_status.current_stage.name }}</td>

                {% if grouping.pipeline_status.current_stage.status == "input_required" %}
                <td><img src="#"></td>
                {% elif grouping.pipeline_status.current_stage.status == "running" %}
                <td><img src="#"></td>
                {% elif grouping.pipeline_status.current_stage.status == "finished" %}
                <td><img src="#"></td>
                {% elif grouping.pipeline_status.current_stage.status == "stopped" %}
                <td><img src="#"></td>
                {% endif %}

                {% else %}
                <td><a href="{{ url_for('pipeline_start', grouping=grouping) }}">Start</a></td>
                <td>No stage queued</td>
                {% endif %}
                {% else %}
                <td>Drop down list of pipelines here.</td>
                <td>No pipeline selected</td>
                {% endif %}

                <td><a href="{{ url_for('link_sample_group_to_client', gid=grouping.id) }}">Link To Client</a></td>

            </tr>
            {% endfor %}
        </table>

        <br>
        <a href="{{ url_for('input_sequencing_sample_mappings', sid=submission.id, type='none') }}" class="input">Add Sample Mappings File</a>
        <br>
        <br>
    </div>
</div>
{% endblock %}